"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[493],{6493:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=a(8683),r=a(885),n=a(2791),c=a(8687),i=a(7255),u={messageWrapper:"Chat_messageWrapper__fJS97",avatar:"Chat_avatar__c4Wgv",textWrapper:"Chat_textWrapper__1lIfI",messagesBlock:"Chat_messagesBlock__tQQtl",title:"Chat_title__biFsK",input:"Chat_input__SAFpm",button:"Chat_button__nwPH0",chatPage:"Chat_chatPage__xYwC+",form:"Chat_form__72gLU"},l=a(184),o=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){return e.chatReducer.statusWs}));return(0,n.useEffect)((function(){return e((0,i.WE)()),function(){e((0,i.R7)())}}),[]),(0,l.jsxs)("div",{children:["error"===t&&(0,l.jsx)("div",{children:"Some error occurred. Please refresh the page"}),(0,l.jsx)(h,{}),(0,l.jsx)(f,{})]})},h=function(){var e=(0,c.v9)((function(e){return e.chatReducer.messages})),t=(0,n.useRef)(null),a=(0,n.useState)(!0),i=(0,r.Z)(a,2),o=i[0],h=i[1];return(0,n.useEffect)((function(){var e;o&&(null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),(0,l.jsxs)("div",{className:u.messagesBlock,onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?!o&&h(!0):o&&h(!1)},children:[e.map((function(e){return(0,l.jsx)(d,(0,s.Z)({},e),e.id)})),(0,l.jsx)("div",{ref:t})]})},d=n.memo((function(e){var t=e.id,a=e.message,s=e.photo,r=e.userName;return console.log(t),(0,l.jsxs)("div",{className:u.messageWrapper,children:[(0,l.jsx)("img",{className:u.avatar,src:s,alt:"avatar"}),(0,l.jsxs)("div",{className:u.textWrapper,children:[(0,l.jsx)("div",{className:u.title,children:r}),(0,l.jsx)("div",{className:u.text,children:a})]})]})})),f=function(){var e=(0,n.useState)(""),t=(0,r.Z)(e,2),a=t[0],s=t[1],o=(0,c.I0)(),h=(0,c.v9)((function(e){return e.chatReducer.statusWs}));return(0,l.jsx)("div",{className:u.AddMessageForm,children:(0,l.jsxs)("div",{className:u.form,children:[(0,l.jsx)("textarea",{className:u.input,onChange:function(e){s(e.currentTarget.value)},value:a}),(0,l.jsx)("button",{disabled:"ready"!==h,onClick:function(){a&&(o((0,i.bG)(a)),s(""))},className:u.button,children:"Send"})]})})},m=function(){return(0,l.jsx)("div",{className:u.chatPage,children:(0,l.jsx)(o,{})})}}}]);
//# sourceMappingURL=493.4d27cb21.chunk.js.map